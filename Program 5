import java.util.Scanner;

class Reggie {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);

        String ssn = getRegExString(in, "Enter SSN (XXX-XX-XXXX): ", "^\\d{3}-\\d{2}-\\d{4}$");
        String mNumber = getRegExString(in, "Enter UC Student M number (Mxxxxx): ", "^(M|m)\\d{5}$");
        String choice = getRegExString(in, "Enter menu choice (O/S/V/Q): ", "^[OoSsVvQq]$");

        System.out.println("SSN: " + ssn);
        System.out.println("M# : " + mNumber);
        System.out.println("Choice: " + choice);

        in.close();
    }

    public static String getRegExString(Scanner pipe, String prompt, String regex) {
        while (true) {
            System.out.print(prompt);
            if (pipe.hasNext(regex)) {
                String value = pipe.next();    // read the valid token
                pipe.nextLine();               // clear the rest of the line (newline fix)
                return value;
            } else {
                String trash = pipe.nextLine(); // read and discard invalid input
                System.out.println("Invalid input: \"" + trash + "\". Please try again.");
            }
        }
    }
}
